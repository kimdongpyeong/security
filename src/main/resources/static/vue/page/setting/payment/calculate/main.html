<div class="ma-3">
    <v-row dense>
        <v-col cols="2">
            <h1>강사별 정산 내역</h1>
        </v-col>
        <v-col cols="2" style="text-align: end;">
            <v-btn outlined @click="visible.payDayVisible = true;">정산 지급일자 수정</v-btn>
        </v-col>
    </v-row>
    <v-row dense>
        <v-col cols="12" sm="4">
            <v-card>
                <v-card-title>강사 목록</v-card-title>
                <v-card-title>
                    <el-row>
                        <el-col :span="12" style="padding: 3px;">
							<el-input
							  placeholder="아이디"
							  v-model="search.username"
							  clearable>
							</el-input>
                        </el-col>
                        <el-col :span="12" style="padding: 3px;"> 
                            <el-input
                              placeholder="이름"
                              v-model="search.name"
                              clearable>
                            </el-input>
                        </el-col>
                    </el-row>
                </v-card-title>
                <v-card-text>
                    <div style="max-height: 400px; overflow-y: auto;">
                        <v-simple-table dense>
                            <template v-slot:default>
                                <thead>
                                    <tr>
                                        <th class="text-center" scope="row">아이디</th>
                                        <th class="text-center" scope="row">이름</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        v-for="(item, i) in data.userList"
                                        :key="item.id"
                                        class="cursor--pointer"
                                        @click="clickUser(item.id, item.name)"
                                    >
                                        <td class="text-center">{{item.username}}</td>
                                        <td class="text-center">{{item.name}}</td>
                                    </tr>
                                </tbody>
                            </template>
                        </v-simple-table>
                    </div>
                </v-card-text>
            </v-card>
        </v-col>
        <v-col cols="12" sm="8" v-if="data.clickUser.id">
            <v-card>
                <v-card-title>{{ data.clickUser.name }} 강사님의 정산내역</v-card-title>
                <el-container>
				    <el-main>
				        <el-row style="padding-top: 15px; padding-bottom: 25px;">
				            <el-col>
				                <el-card>
				                    <el-row style="padding: 20px;">
				                        <el-col :span="4"><h2>정산 지급 예정일</h2></el-col>
				                        <el-col :offset="2" :span="3">익월 {{ payDay.value }}일</el-col>
                                    </el-row>
                                    <el-row style="padding: 20px;">
                                        <el-col :span="4"><h2>정산 계좌</h2></el-col>
                                        <el-col :offset="2" :span="10">{{ summary.account ? summary.account : "계좌등록필요" }}</el-col>
                                    </el-row>
                                </el-card>
                            </el-col>
                        </el-row>
                        <el-row style="padding: 10px;">
                            <el-col>
                              <font style="font-weight: bolder; font-size: larger;">정산 요약</font>
                            </el-col>
                        </el-row>
                        <el-row style="padding: 10px;">
                            <el-col :span="2">
                               <font>조회 기간</font>
                            </el-col>
                            <el-col :span="5">
                                <el-date-picker
                                    v-model="select.monthTerm"
                                    size="mini"
                                    type="monthrange"
                                    value-format="yyyy-MM"
                                    range-separator="~"
                                    start-placeholder="시작"
                                    end-placeholder="종료">
                                  </el-date-picker>
                            </el-col>
                            <el-col :span="17" style="text-align: end;">
                               <el-button type="success" plain size="small" @click="downloadExcel()">다운로드</el-button>
                            </el-col>
                        </el-row>
                        <el-row style="padding-top: 15px;">
                            <el-col>
                                <el-card>
                                    <el-table
                                        :data="calculateList"
                                        :default-sort = "sortTable"
                                        style="width: 100%">
                                            <el-table-column
                                                prop="month"
                                                label="정산 대상 월"
                                                sortable>
                                            </el-table-column>
                                            <el-table-column
                                                prop="payDate"
                                                label="정산 예상일"
                                                sortable>
                                            </el-table-column>
                                            <el-table-column
                                                prop="payMoney"
                                                label="정산 금액"
                                                sortable>
                                            </el-table-column>
                                            <el-table-column
                                                prop="cashTotal"
                                                label="현금 입금액"
                                                sortable>
                                            </el-table-column>
                                            <el-table-column
                                                prop="cardTotal"
                                                label="카드 결제액"
                                                sortable>
                                            </el-table-column>
                                            <el-table-column
                                                prop="levyMoney"
                                                label="부과세"
                                                sortable>
                                            </el-table-column>
                                    </el-table>
                                </el-card>
                            </el-col>
                        </el-row>
                    </el-main>
                </el-container>
                </v-card-text>
            </v-card>
        </v-col>
    </v-row>
    
    <div>
       <el-dialog
          title="정산 지급일자"
          :visible.sync="visible.payDayVisible"
          width="30%"
          :close-on-click-modal="false"
          :close-on-press-escape="false"
          center>
            <div style="text-align: center;">
                <el-row style="padding-top: 10px;">
                    <el-col :offset="9" :span="6">
                        <el-input v-model="payDay.value" maxlength="2" clearable>
                            <template slot="append">일</template>
                        </el-input>
                    </el-col>
                </el-row>
            </div>
            <span slot="footer" class="dialog-footer">
                <el-button @click="visible.payDayVisible = false;">취소</el-button>
                <el-button type="primary" @click="modifyPayDay();">수정</el-button>
            </span>
        </el-dialog>
    </div>
</div>